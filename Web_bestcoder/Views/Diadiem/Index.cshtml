@inject IConfiguration Configuration
@{
    ViewData["Title"] = "Diadiem";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<head>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
    <script src="https://cdn.jsdelivr.net/npm/@@goongmaps/goong-js@1.0.9/dist/goong-js.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/@@goongmaps/goong-js@1.0.9/dist/goong-js.css" rel="stylesheet" />
    <style>
        body {
            margin: 0;
            padding: 0;
        }

        .map-container {
            position: relative;
            height: 100vh; /* Full screen height */
        }

        #map {
            width: 100%; /* Set map width */
            height: 100%; /* Set map height */
            border: 1px solid #ddd; /* Optional border */
        }

        .search-bar1 {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1;
            width: 50%;
            display: flex;
        }

            .search-bar1 input {
                flex: 1;
                padding: 10px;
                font-size: 16px;
            }

            .search-bar1 button {
                padding: 10px;
                font-size: 16px;
                background-color: #007bff;
                color: white;
                border: none;
                cursor: pointer;
            }
    </style>
</head>
<body>

    <section id="foodies" class="my-5">
        <div class="container map-container">

            <!-- Search Bar -->
            <div class="search-bar1">
                <input type="text" id="search-input" placeholder="Nhập địa điểm quyên góp" />
                <button onclick="searchLocation()">Search</button>
            </div>

            <!-- Map -->
            <div id="map"></div>

            <script> 
                var accessToken = '@Configuration["GoongMap:MaptilesKey"]';
                goongjs.accessToken = accessToken;
                    var map = new goongjs.Map({
                    container: 'map',
                    style: 'https://tiles.goong.io/assets/goong_map_dark.json',
                    center: [105.79449389547807, 21.023262952893536],
                    zoom: 8
                });

                var marker = new goongjs.Marker()
                    .setLngLat([105.79449389547807, 21.023262952893536])
                    .addTo(map);
                var marker = new goongjs.Marker()
                    .setLngLat([105.79969171424, 21.03145698011039])
                    .addTo(map);
                var marker = new goongjs.Marker()
                    .setLngLat([105.7463049346494, 21.038202237863658])
                    .addTo(map);
                var marker = new goongjs.Marker()
                    .setLngLat([105.8449280838239, 21.03606203346743])
                    .addTo(map);
                var marker = new goongjs.Marker()
                    .setLngLat([105.84872309736471, 21.009139690306966])
                    .addTo(map);
                var marker = new goongjs.Marker()
                    .setLngLat([105.89861318021843, 21.06003589119038])
                    .addTo(map);
                var marker = new goongjs.Marker()
                    .setLngLat([105.89861318021843, 21.06003589119038])
                    .addTo(map);
                var marker = new goongjs.Marker()
                    .setLngLat([105.34241795451874, 20.82357592939995])
                    .addTo(map);
                var marker = new goongjs.Marker()
                    .setLngLat([106.05056351778904, 20.6800965470578])
                    .addTo(map);
                var marker = new goongjs.Marker()
                    .setLngLat([104.88130233508849, 21.71023507970105])
                    .addTo(map);

                // Function to search for location
                function searchLocation() {
                    var query = document.getElementById("search-input").value;
                    if (!query) {
                        alert("Please enter a location");
                        return;
                    }

                    // Geocoding API request to find coordinates based on location
                    var apiKey = 'your-goong-api-key'; // Replace with your Goong Geocoding API key
                    var url = `https://rsapi.goong.io/Geocode?address=${encodeURIComponent(query)}&api_key=${apiKey}`;

                    fetch(url)
                        .then(response => response.json())
                        .then(data => {
                            if (data.results && data.results.length > 0) {
                                var result = data.results[0];
                                var lngLat = [result.geometry.location.lng, result.geometry.location.lat];

                                // Update map center and marker position
                                map.flyTo({ center: lngLat, zoom: 12 });
                                marker.setLngLat(lngLat);
                            } else {
                                alert("Location not found");
                            }
                        })
                        .catch(err => {
                            console.error("Error fetching geocode:", err);
                            alert("Error finding location");
                        });
                }
            </script>
        </div>
    </section>


        <section id="register" style="height: 100vh; background-image: url('/User/images/background.jpg'); background-size: cover; background-position: center;">
            <div class="container h-100 d-flex justify-content-center align-items-center">
                <div class="row w-100 d-flex justify-content-center">
                    <div class="col-md-8">
                        <!-- Phần chứa h6 -->
                        <div class="text-center mb-4">
                            <h6 class="display-4 fw-normal">Đăng ký quyên góp cùng Green Cycle</h6>
                        </div>
                        <div class="form-wrapper p-4" style="background-color: rgba(255, 255, 255, 0.85); border-radius: 15px; max-width: 100%; display: flex; flex-direction: column; align-items: center;">
                            <form style="width: 100%;">
                                <div class="row">
                                    <!-- Form Left Section -->
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="fullname" class="form-label">Họ tên</label>
                                            <input type="text" class="form-control form-control-md" name="fullname" id="fullname" placeholder="Nhập Họ tên của bạn" required>
                                        </div>
                                        <div class="mb-3">
                                            <label for="email" class="form-label">Email</label>
                                            <input type="email" class="form-control form-control-md" name="email" id="email" placeholder="Nhập địa chỉ Email của bạn" required>
                                        </div>
                                        <div class="mb-3">
                                            <label for="address" class="form-label">Địa chỉ</label>
                                            <input type="text" class="form-control form-control-md" name="address" id="address" placeholder="Nhập địa chỉ đến quyên góp" required>
                                        </div>
                                    </div>
                                    <!-- Form Right Section -->
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="donation-item" class="form-label">Sản phẩm muốn từ thiện</label>
                                            <input type="text" class="form-control form-control-md" name="donation-item" id="donation-item" placeholder="Nhập sản phẩm bạn muốn từ thiện" required>
                                        </div>
                                        <div class="mb-3">
                                            <label for="donation-date" class="form-label">Ngày đến quyên góp</label>
                                            <input type="date" class="form-control form-control-md" name="donation-date" id="donation-date" required>
                                        </div>
                                        <div class="mb-3">
                                            <label for="donation-time" class="form-label">Giờ đến quyên góp</label>
                                            <input type="time" class="form-control form-control-md" name="donation-time" id="donation-time" required>
                                        </div>
                                    </div>
                                </div>
                                <!-- Nút đăng ký căn giữa -->
                                <div class="d-flex justify-content-center">
                                    <button type="submit" class="btn btn-dark btn-lg rounded-1">Đăng ký</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </section>

</body>
